<!--
  This container holds the entire file system tree component.
  It provides a consistent layout and background.
-->
<div class="file-system-container">
  <!-- Application Title -->
  <div style="text-align: center;"><p>INKSPIRE</p></div>

  <!--
    Context menu for file and directory actions.
    Currently disabled, but can be used for future features like
    editing, deleting, or adding new items.
  -->
  <mat-menu #fileMenu="matMenu">
  <!--   <button mat-menu-item (click)="handleEditAction()" [disabled]="!selectedNode"> -->
  <!--     <mat-icon>edit</mat-icon> -->
  <!--     <span>Edit name</span> -->
  <!--   </button> -->
  <!--   <button mat-menu-item (click)="handleRemoveAction()" [disabled]="!selectedNode"> -->
  <!--     <mat-icon>delete</mat-icon> -->
  <!--     <span>Remove</span> -->
  <!--   </button> -->
  <!--   <button mat-menu-item (click)="handleAddAction()" [disabled]="selectedNode && !selectedNode.expandable"> -->
  <!--     <mat-icon>add</mat-icon> -->
  <!--     <span>Add new item</span> -->
  <!--   </button> -->
  </mat-menu>

  <!--
    Modal components for user interaction.
    These are conditionally rendered based on component state.
    Currently disabled.
  -->
  <!-- @if (isModalVisible){ -->
  <!--   <app-modal-choice [title]="title" (close)="hideModal()" (validate)="handleModalValidate($event)"></app-modal-choice> -->
  <!-- } -->
  <!--  @if (isEditModalVisible){ -->
  <!--   <app-modal-edit [title]="title" [titleFile]="nameOfNode" [context]="contextOfDir" [showTextarea]="isDirectoryEditing" (close)="hideModal()" (validate)="handleModalValidate($event)"></app-modal-edit> -->
  <!-- } -->

  <!--
    Actions bar, intended to hold buttons for primary actions.
    Currently disabled. The menu trigger below is an example of its intended use.
  -->
  <!-- <div class="actions-bar"> -->
  <!--   <button -->
  <!--     mat-icon-button -->
  <!--     [matMenuTriggerFor]="fileMenu"> -->
  <!--     <mat-icon>more_vert</mat-icon> -->
  <!--   </button> -->
  <!-- </div> -->

  <!--
    The main Material Tree component that displays the file system.
    It's bound to the `dataSource` and `treeControl` from the component class.
  -->
<mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="mdc-tree">
  <!--
    Node definition for expandable nodes (directories).
    It includes a toggle button, an icon, and the node's name.
  -->
  <mat-tree-node
    *matTreeNodeDef="let node; when: hasChild"
    class="mdc-tree-node"
    [class.selected-node]="isSelected(node)"
    (click)="selectNode(node)">
    <div class="mdc-tree-node-content">
      <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.name">
        <mat-icon>
          {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
        </mat-icon>
      </button>
      <mat-icon>folder</mat-icon>
      <span class="node-name">
        {{node.name}}
      </span>
    </div>
    <!-- This div holds the nested nodes and is shown/hidden based on expansion state. -->
    <div [class.example-tree-invisible]="!treeControl.isExpanded(node)">
      <ng-container matTreeNodeOutlet></ng-container>
    </div>
  </mat-tree-node>

  <!--
    Node definition for leaf nodes (files).
    It includes an icon and the node's name.
    A disabled button is used as a placeholder to maintain alignment with directories.
  -->
  <mat-tree-node
    *matTreeNodeDef="let node"
    class="mdc-tree-node file-node"
    [class.selected-node]="isSelected(node)"
    (click)="selectNode(node)">
    <div class="mdc-tree-node-content">
      <button mat-icon-button disabled style="visibility: hidden;"></button>
      <mat-icon>insert_drive_file</mat-icon>
      <span class="node-name">
        {{node.name}}
      </span>
    </div>
  </mat-tree-node>
</mat-tree>
</div>
